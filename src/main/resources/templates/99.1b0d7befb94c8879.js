"use strict";(self.webpackChunkincident=self.webpackChunkincident||[]).push([[99],{7130:(V,A,o)=>{o.d(A,{A:()=>e,F:()=>d});const e=[{header:"Status Code",name:"statusCode",id:"status_code__createFollowUp",defaultValue:"",required:!0,type:"dropdown",status:"basic",isDropDown:{label:"statusName",options:[],optionsName:"statusCode",value:"statusCode"}},{header:"Action By",name:"actionBy",id:"actionBy_createFollowUp",defaultValue:"",required:!0,type:"text",status:"disabled"},{header:"Action Date",name:"actionDate",id:"action_date_createFollowUp",defaultValue:new Date,required:!0,type:"date",status:"basic",showTime:!0},{header:"Action Taken",name:"actionTaken",id:"actionTaken_createFollowUp",defaultValue:"",required:!1,type:"textarea",status:"basic"},{header:"Comments",name:"comments",id:"comments_createFollowUp",defaultValue:"",required:!1,type:"textarea",status:"basic"}],d=["1_statusCode","1_actionDate","1_actionTaken","1_comments","1_actionBy"]},9726:(V,A,o)=>{o.d(A,{c:()=>L});var e=o(4946),d=o(7130),y=o(8180),v=o(8268),E=o(1252),f=o(7417),U=o(11),c=o(7553),O=o(9627),P=o(6814),C=o(7759),M=o(6725),Z=o(986),h=o(8355);let s=(()=>{class N{constructor(g,u,x,k,J,G,j){this.service=g,this.apis=u,this.lkps=x,this.sharedService=k,this.toast=J,this.datePipe=G,this.router=j,this.header_name="Incident Followup",this.onclose=new e.vpe,this.onCreate=new e.vpe}ngOnInit(){this.id=this.router.url.split("/")[3],this.cols=this.sharedService.translate(d.A),this.get_status_code(),this.lkps.get_lkp_status_code([]),this.createForm()}get_status_code(){this.lkps.lkp_incident_status_code.pipe().subscribe(g=>{this.cols.map(u=>{u.isDropDown&&"statusCode"==u.name&&(u.defaultValue=g[0],u.isDropDown.options=g)})})}createForm(){this.form=this.service.create_form_by_cols(this.cols),this.setActionBy()}setActionBy(){this.form.controls.actionBy.disable();const g=localStorage.getItem("username")||"default username";this.form.controls.actionBy.patchValue(g)}add_incident_followup({value:g,invalid:u}){if(u)this.toast.showError("Please complete all required fields");else{let x=g;x.actionDate=this.service.dates().getDateTime(x.actionDate),x.incidentId=this.id,this.apis.add_incident_followup(x).subscribe(k=>{200==k.statusCode&&(this.toast.showAlert("success","Success",k.clientMessage),this.onCreate.emit(x),this.onclose.emit()),this.form.reset(),this.get_status_code()})}}}return N.\u0275fac=function(g){return new(g||N)(e.Y36(v.F),e.Y36(E.b),e.Y36(Z.z),e.Y36(v.F),e.Y36(f.k),e.Y36(P.uU),e.Y36(c.F0))},N.\u0275cmp=e.Xpm({type:N,selectors:[["app-create-follow-up"]],outputs:{onclose:"onclose",onCreate:"onCreate"},decls:1,vars:5,consts:[[3,"form","action","form_width","nCols","cols","onSubmit"]],template:function(g,u){1&g&&(e.TgZ(0,"mts-form",0),e.NdJ("onSubmit",function(k){return u.add_incident_followup(k)}),e.qZA()),2&g&&e.Q6J("form",u.form)("action","save")("form_width",100)("nCols",2)("cols",u.cols)},dependencies:[h.U]}),N})();const r=["create_followup_modal"],_=["createFollowUp"];function D(N,R){1&N&&e.GkF(0)}function S(N,R){if(1&N){const g=e.EpF();e.TgZ(0,"app-create-follow-up",5,6),e.NdJ("onclose",function(){e.CHM(g);const x=e.oxw();return e.KtG(x.closeModal())})("onCreate",function(x){e.CHM(g);const k=e.oxw();return e.KtG(k.addNewFollow(x))}),e.qZA()}}let L=(()=>{class N{constructor(g,u,x,k,J,G){this.sharedService=g,this.apis=u,this.toast=x,this.incidentDataService=k,this.router=J,this.translateService=G,this.cols=[],this.row={},this.nav=new e.vpe,this.header_name="ManageFollowUp",this.followUpDataHeaders=d.F,this.followUpData=[],this.loading=!1,this.incidentCode="",this.lang="ar"}ngOnInit(){this.lang=this.translateService.get_app_lang(),this.router.url.includes("archive")&&(this.currentUrl="archive"),this.cols=this.sharedService.get_cols_by_fileds_and_headers(this.followUpDataHeaders),this.incidentDataService.getIncidentCode().pipe((0,y.q)(1)).subscribe(u=>{u&&(this.incidentCode=u,this.getIncidentsFollowUp(u))})}btnClicked(g){"Add"==g.type&&this.addNewFollowup()}closeModal(){this.create_followup_modal.clickOnButton("close")}getIncidentsFollowUp(g){this.followUpData=[],this.loading=!0,"archive"==this.currentUrl?this.apis.get_AR_follow_up_data(g).subscribe(u=>{Array.isArray(u.body)&&(this.followUpData=u.body),this.loading=!1},u=>{this.loading=!1},()=>{}):this.apis.get_follow_up_data(g).subscribe(u=>{this.loading=!1,Array.isArray(u.body)&&(this.followUpData=u.body)},u=>{this.loading=!1},()=>{})}addNewFollowup(){this.create_followup_modal.clickOnButton("open"),this.createFollowUp.setActionBy()}addNewFollow(g){console.log("new follow row",g),this.followUpData.push(g)}}return N.\u0275fac=function(g){return new(g||N)(e.Y36(v.F),e.Y36(E.b),e.Y36(f.k),e.Y36(U.k),e.Y36(c.F0),e.Y36(O.s))},N.\u0275cmp=e.Xpm({type:N,selectors:[["app-follow-up"]],viewQuery:function(g,u){if(1&g&&(e.Gf(r,5),e.Gf(_,5)),2&g){let x;e.iGM(x=e.CRH())&&(u.create_followup_modal=x.first),e.iGM(x=e.CRH())&&(u.createFollowUp=x.first)}},inputs:{row:"row"},outputs:{nav:"nav"},decls:6,vars:10,consts:[[3,"id","cols","data","show_edit","loading","show_add","btn_click"],[3,"size","modal_name","header_name"],["create_followup_modal",""],[4,"ngTemplateOutlet"],["myComponent",""],[3,"onclose","onCreate"],["createFollowUp",""]],template:function(g,u){if(1&g&&(e.TgZ(0,"mts-table",0),e.NdJ("btn_click",function(k){return u.btnClicked(k)}),e.qZA(),e.TgZ(1,"mts-modal",1,2),e.YNc(3,D,1,0,"ng-container",3),e.qZA(),e.YNc(4,S,2,0,"ng-template",null,4,e.W1O)),2&g){const x=e.MAs(5);e.Q6J("id","followUpTableID")("cols",u.cols)("data",u.followUpData)("show_edit",!1)("loading",u.loading)("show_add","archive"==u.currentUrl?"":"ar"==u.lang?"\u0625\u0636\u0627\u0641\u0629 \u0645\u062a\u0627\u0628\u0639\u0629":"Add Follow Up"),e.xp6(1),e.Q6J("size","modal-xl")("modal_name","create-follow-up")("header_name",u.header_name),e.xp6(2),e.Q6J("ngTemplateOutlet",x)}},dependencies:[P.tP,C.a,M.z,s]}),N})()},8690:(V,A,o)=>{o.d(A,{S:()=>d,w:()=>e});const e=["tghPostOffice","tghTemplateType","originOffice","senderAddress","message","tghLanguage","tghCountry","tghMsgStatus","seqNo","personName","personTitle","genId","tghId","tghCost","billTelNo","tghCode","tghDate","callDate","userCode","requestNo","callerName","callerTelNo","billTellNo","countryName","languageName","tempTypeName","tempName","senderAddress","statusName","origionOfficeName","officeName","deliveryNotice","decoration","notes","urgent","admin","international","template","sendDate","senderName","recipientName","address","recipientVIP","personTitle","personName","telegraphCost","actualRecName","actualRecDate","message","telegraphDate"],d=[["deliveryNotice",0],["decoration",0],["urgent",0],["admin",0],["international",0],["template",0],["recipientVIP",0]]},1252:(V,A,o)=>{o.d(A,{b:()=>E});var e=o(3155),d=o(4946),y=o(9862),v=o(7417);let E=(()=>{class f{constructor(c,O){this.http=c,this.toast=O}get_incident_data(c){return this.http.post(e.D.apiURL+"/TGH_INCIDENT/searchTghIncident",c)}add_incident_data(c){return this.http.post(e.D.apiURL+"/TGH_INCIDENT/createTghIncident",c)}update_incident_data(c){return this.http.post(e.D.apiURL+"/TGH_INCIDENT/updateTghIncident",c)}archive_incident(c){return this.http.post(e.D.apiURL+`/TGH_INCIDENT/archiveIncident?incidentId=${c}`,c)}get_dataByCode(c){return this.http.get(e.D.apiURL+`/TGH_INCIDENT/getTghIncidentById?incidentId=${c}`)}get_generate_code(){return this.http.get(e.D.apiURL+"/TGH_INCIDENT/getNextValINC_SEQ")}get_city_codes(c){return this.http.post(e.D.apiURL+"/TGH_CITY/search",c)}get_follow_up_data(c){return this.http.get(e.D.apiURL+`/TGH_INCIDENT_FOLLOWUP/getIncidentFollowUpById?incidentId=${c}`)}get_AR_follow_up_data(c){return this.http.get(e.D.apiURL+`/AR_INCIDENT_FOLLOWUP/getArIncidentFollowUpById?incidentId=${c}`)}add_incident_followup(c){return this.http.post(e.D.apiURL+"/TGH_INCIDENT_FOLLOWUP/insertIncidentFollowUp",c)}get_telegraphs(c,O=0,P=50){return this.http.post(e.D.apiURL+`/Telegraph/search?pageNo=${O}&pageSize=${P}`,c)}get_row_details(c){return this.http.get(e.D.apiURL+`/AR_INCIDENT/getDataByCode?code=${c}`)}get_tgh_details(c,O){return this.http.get(e.D.apiURL+`/Telegraph/getTelegraphById?tghId=${c}`,{params:O})}get_generator_by_id(c){return this.http.get(e.D.apiURL+`/TGH_GENERATOR/getGeneratorById?genId=${c}`)}}return f.\u0275fac=function(c){return new(c||f)(d.LFG(y.eN),d.LFG(v.k))},f.\u0275prov=d.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},11:(V,A,o)=>{o.d(A,{k:()=>y});var e=o(5619),d=o(4946);let y=(()=>{class v{constructor(){this.incidentSearch=void 0,this.incidentCode=new e.X(""),this.tghId=new e.X("")}getIncidentCode(){return this.incidentCode.asObservable()}setIncidentCode(f){this.incidentCode.next(f)}getTghId(){return this.tghId.asObservable()}setTghId(f){this.tghId.next(f)}}return v.\u0275fac=function(f){return new(f||v)},v.\u0275prov=d.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},870:(V,A,o)=>{o.d(A,{x:()=>Z});var e=o(4946),d=o(7434),y=o(9627),v=o(6814);function E(h,s){if(1&h){const r=e.EpF();e.TgZ(0,"div")(1,"label"),e._uU(2),e.qZA(),e.TgZ(3,"span",5),e.NdJ("click",function(){e.CHM(r);const D=e.oxw(2);return e.KtG(D.get_gen_details())}),e._uU(4),e.qZA()()}if(2&h){const r=e.oxw().$implicit;e.xp6(2),e.hij("",r.header,":"),e.xp6(2),e.hij(" ",r.value," ")}}function f(h,s){if(1&h&&(e.TgZ(0,"div")(1,"label"),e._uU(2),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()()),2&h){const r=e.oxw(2).$implicit;e.xp6(2),e.hij("",r.header,":"),e.xp6(2),e.hij(" ",r.value," ")}}function U(h,s){if(1&h&&(e.TgZ(0,"div")(1,"label"),e._uU(2),e.qZA(),e._UZ(3,"input",8),e.qZA()),2&h){const r=e.oxw(3).$implicit;e.xp6(2),e.hij("",r.header,":"),e.xp6(1),e.Q6J("checked",r.value)}}function c(h,s){if(1&h&&e.YNc(0,U,4,2,"div",3),2&h){e.oxw();const r=e.MAs(4),_=e.oxw().$implicit;e.Q6J("ngIf","checkbox"==_.type)("ngIfElse",r)}}function O(h,s){if(1&h&&(e.TgZ(0,"div")(1,"label"),e._uU(2),e.qZA(),e._UZ(3,"textarea",10),e.qZA()),2&h){const r=e.oxw(3).$implicit;e.xp6(2),e.hij("",r.header,":"),e.xp6(1),e.Q6J("value",r.value)}}function P(h,s){if(1&h&&e.YNc(0,O,4,2,"div",9),2&h){const r=e.oxw(2).$implicit;e.Q6J("ngIf","textarea"==r.type)}}function C(h,s){if(1&h&&(e.YNc(0,f,5,2,"div",3),e.YNc(1,c,1,2,"ng-template",null,6,e.W1O),e.YNc(3,P,1,1,"ng-template",null,7,e.W1O)),2&h){const r=e.MAs(2),_=e.oxw().$implicit;e.Q6J("ngIf",""==_.type)("ngIfElse",r)}}function M(h,s){if(1&h&&(e.ynx(0),e.YNc(1,E,5,2,"div",3),e.YNc(2,C,5,2,"ng-template",null,4,e.W1O),e.BQk()),2&h){const r=s.$implicit,_=e.MAs(3);e.xp6(1),e.Q6J("ngIf","Gen ID"==r.header||"\u0631\u0642\u0645 \u0627\u0644\u0645\u0624\u0644\u0641"==r.header)("ngIfElse",_)}}let Z=(()=>{class h{get_gen_details(){this.get_gen.emit(this.tgh_code)}constructor(r){this.translateService=r,this.tgh_code=0,this.get_gen=new e.vpe,this.labels=[]}set_labels(r,_,D="global"){let S=this.translateService.get_app_lang();this.labels=Object.keys(r).map((L,N)=>{let R="";return _.has(L)?R="checkbox":"message"==L&&(R="textarea"),{header:d.L[D][S][L],value:r[L],type:R}})}}return h.\u0275fac=function(r){return new(r||h)(e.Y36(y.s))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-labels-form"]],inputs:{tgh_code:"tgh_code"},outputs:{get_gen:"get_gen"},decls:3,vars:1,consts:[[1,"form-container"],[1,"custom-grid"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["notGen",""],[1,"clickable",3,"click"],["elseIfBlock",""],["elseBlock",""],["type","checkbox","disabled","",3,"checked"],[4,"ngIf"],["disabled","",2,"width","400px","max-width","calc(100% - 100px)",3,"value"]],template:function(r,_){1&r&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,M,4,2,"ng-container",2),e.qZA()()),2&r&&(e.xp6(2),e.Q6J("ngForOf",_.labels))},dependencies:[v.sg,v.O5],styles:[".custom-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;align-items:center;gap:.5rem 1rem;padding:15px 10px}label[_ngcontent-%COMP%]{font-weight:700;margin-right:5px}.clickable[_ngcontent-%COMP%]{color:#003286}.clickable[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.custom-grid[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:baseline}"]}),h})()},7057:(V,A,o)=>{o.d(A,{S:()=>y});var e=o(4946),d=o(8848);let y=(()=>{class v{constructor(f){this.breadcrumbService=f,this.title="",this.titleName=""}ngOnChanges(f){f.title.currentValue&&(this.titleName=this.breadcrumbService.getLabel(f.title.currentValue))}}return v.\u0275fac=function(f){return new(f||v)(e.Y36(d.D))},v.\u0275cmp=e.Xpm({type:v,selectors:[["mts-header-breadcrumb"]],inputs:{title:"title"},features:[e.TTD],decls:3,vars:1,consts:[[1,"m-3","d-block"],[1,"fs-4"]],template:function(f,U){1&f&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2),e.qZA()()),2&f&&(e.xp6(2),e.Oqu(U.titleName))},encapsulation:2}),v})()},8404:(V,A,o)=>{o.d(A,{J:()=>se});var e=o(4946),d=o(3662),y=o(8645),v=o(1426),E=o(5592),f=o(9773);function U(p){p||((0,e.gHi)(U),p=(0,e.f3M)(e.ktI));const a=new E.y(i=>p.onDestroy(i.next.bind(i)));return i=>i.pipe((0,f.R)(a))}var X=o(8268),ne=o(8848),oe=o(8478),ie=o(6814),re=o(6462);function ae(p,a){if(1&p){const i=e.EpF();e.TgZ(0,"div",3)(1,"button",4),e.NdJ("click",function(){e.CHM(i);const I=e.oxw();return e.KtG(I.go_to_page(1))}),e.TgZ(2,"span"),e._uU(3,"\xab"),e.qZA()(),e.TgZ(4,"button",4),e.NdJ("click",function(){e.CHM(i);const I=e.oxw();return e.KtG(I.go_to_page(I.current-1))}),e.TgZ(5,"span"),e._uU(6,"<"),e.qZA()(),e.TgZ(7,"button",5),e._uU(8),e.qZA(),e.TgZ(9,"button",4),e.NdJ("click",function(){e.CHM(i);const I=e.oxw();return e.KtG(I.go_to_page(I.current+1))}),e.TgZ(10,"span"),e._uU(11,">"),e.qZA()(),e.TgZ(12,"button",4),e.NdJ("click",function(){e.CHM(i);const I=e.oxw();return e.KtG(I.go_to_page(I.size))}),e.TgZ(13,"span"),e._uU(14,"\xbb"),e.qZA()()()}if(2&p){const i=e.oxw();e.xp6(1),e.Q6J("disabled",1==i.current),e.xp6(3),e.Q6J("disabled",1==i.current),e.xp6(4),e.AsE("[",i.current," / ",i.size,"]"),e.xp6(1),e.Q6J("disabled",i.current==i.size),e.xp6(3),e.Q6J("disabled",i.current==i.size)}}let se=(()=>{class p{constructor(i,m,I){this.sharedService=i,this.breadCrumbService=m,this.softSave=I,this.destroyRef=(0,e.f3M)(e.ktI),this.index_obs=new y.x,this.ngUnsubscribe=new y.x,this.moveTo=new e.vpe,this.size=1,this.current=1,this.ids=[],this.items=[],this.home={},this.trackIds()}trackIds(){[this.ids,this.current]=this.softSave.getIdsFromLS(),this.size=this.ids.length,this.index_obs.pipe((0,v.b)(d.xE),U(this.destroyRef)).subscribe(i=>{this.moveTo.emit(this.ids[i]),this.softSave.setIndInLS(i)})}go_to_page(i){this.current=i,this.index_obs.next(i-1)}clicked(i){this.softSave.softSave$=!0}ngOnChanges(i){if(i.breadcrumb.currentValue){let m=i.breadcrumb.currentValue;this.home.routerLink=m.url,this.items=this.getTitles(m.titles)}}getTitles(i){return i.map(m=>({label:this.breadCrumbService.getLabel(m)}))}ngOnDestroy(){this.ngUnsubscribe.next(""),this.ngUnsubscribe.complete(),this.ngUnsubscribe=new y.x}}return p.\u0275fac=function(i){return new(i||p)(e.Y36(X.F),e.Y36(ne.D),e.Y36(oe.a))},p.\u0275cmp=e.Xpm({type:p,selectors:[["mts-paginator"]],inputs:{breadcrumb:"breadcrumb"},outputs:{moveTo:"moveTo"},features:[e.TTD],decls:3,vars:3,consts:[[1,"paginator-container"],[1,"max-w-full",3,"model","home","onItemClick"],["class","navigation",4,"ngIf"],[1,"navigation"],["type","button",1,"custom-btn",3,"disabled","click"],["disabled","",1,"custom-btn","cancel-blur"]],template:function(i,m){1&i&&(e.TgZ(0,"div",0)(1,"p-breadcrumb",1),e.NdJ("onItemClick",function(Y){return m.clicked(Y)}),e.qZA(),e.YNc(2,ae,15,6,"div",2),e.qZA()),2&i&&(e.xp6(1),e.Q6J("model",m.items)("home",m.home),e.xp6(1),e.Q6J("ngIf",m.size>0))},dependencies:[ie.O5,re.a],styles:[".paginator-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.625rem 1rem .375rem;background-color:#f2f2f2}.paginator-container[_ngcontent-%COMP%]   .navigation[_ngcontent-%COMP%]{align-self:center}.paginator-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.4rem!important}.custom-btn[_ngcontent-%COMP%]{background-color:transparent;border:0 none;font-size:1.4rem!important;font-weight:700;color:#000;min-width:3rem;height:3rem;transition:box-shadow .2s;border-radius:50%}.custom-btn[_ngcontent-%COMP%]:not(:disabled):hover, .custom-btn[_ngcontent-%COMP%]:not(:disabled):focus{color:#4e545a;background:#e9ecef;border-color:transparent;outline:0;scale:1}.custom-btn[_ngcontent-%COMP%]:disabled{pointer-events:none}.custom-btn[_ngcontent-%COMP%]:disabled:not(.cancel-blur){color:#c6c6c6}.custom-btn[_ngcontent-%COMP%]   .first[_ngcontent-%COMP%]{transition:box-shadow .3s ease-in-out,color .3s ease-in-out}.custom-btn[_ngcontent-%COMP%]   .first[_ngcontent-%COMP%]:hover{box-shadow:0 0 40px 40px #e74c3c inset}  .p-breadcrumb ul li .p-menuitem-text{font-weight:600;font-size:17px!important}  .p-breadcrumb li:not(:first-child){pointer-events:none!important;cursor:default!important}"]}),p})()},7023:(V,A,o)=>{o.d(A,{C:()=>U});var e=o(6814),d=o(4946),y=o(799),v=o(8848);function E(c,O){1&c&&d.GkF(0)}function f(c,O){if(1&c&&(d.ynx(0),d.TgZ(1,"p-tabPanel",3),d.YNc(2,E,1,0,"ng-container",4),d.qZA(),d.BQk()),2&c){const P=O.$implicit;d.xp6(1),d.Q6J("header",P.header),d.xp6(1),d.Q6J("ngComponentOutlet",P.component)}}let U=(()=>{class c{constructor(P){this.breadCrumbService=P,this.activeIndex=0,this.tabs=[],this.tabChangedTo=new d.vpe}tabChanged(P){this.tabChangedTo.emit(P)}ngOnChanges(P){P.tabs&&this.setHeaders(P.tabs.currentValue)}setHeaders(P){setTimeout(()=>{P.map(C=>{C.header=this.breadCrumbService.getLabel(C.header)}),this.tabs=P},200)}}return c.\u0275fac=function(P){return new(P||c)(d.Y36(v.D))},c.\u0275cmp=d.Xpm({type:c,selectors:[["mts-tabs-view"]],inputs:{activeIndex:"activeIndex",tabs:"tabs"},outputs:{tabChangedTo:"tabChangedTo"},standalone:!0,features:[d.TTD,d.jDz],decls:3,vars:2,consts:[[1,"card"],[3,"activeIndex","activeIndexChange"],[4,"ngFor","ngForOf"],[3,"header"],[4,"ngComponentOutlet"]],template:function(P,C){1&P&&(d.TgZ(0,"div",0)(1,"p-tabView",1),d.NdJ("activeIndexChange",function(Z){return C.activeIndex=Z})("activeIndexChange",function(Z){return C.tabChanged(Z)}),d.YNc(2,f,3,2,"ng-container",2),d.qZA()()),2&P&&(d.xp6(1),d.Q6J("activeIndex",C.activeIndex),d.xp6(1),d.Q6J("ngForOf",C.tabs))},dependencies:[y.LU,y.xf,y.x4,e.ez,e.$G,e.sg],styles:[".p-tabview .p-tabview-panels{padding:.25rem}"]}),c})()},7759:(V,A,o)=>{o.d(A,{a:()=>te});var e=o(4946),d=o(6814),y=o(7706),v=o(9972),E=o(2818),f=o(95),U=o(5969),c=o(7375);function O(n,w){if(1&n){const t=e.EpF();e.TgZ(0,"div",15)(1,"span",16),e._UZ(2,"i",17),e.TgZ(3,"input",18,19),e.NdJ("input",function(){e.CHM(t);const b=e.MAs(4);e.oxw(2);const T=e.MAs(2);return e.KtG(T.filterGlobal(b.value,"contains"))}),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("placeholder",t.search_placeholder)}}function P(n,w){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"button",20),e.NdJ("click",function(){e.CHM(t);const b=e.oxw(2);return e.KtG(b.btn_clicked("Add",{}))}),e._uU(2),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",t.show_add," ")}}function C(n,w){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"button",20),e.NdJ("click",function(){e.CHM(t);const b=e.oxw(2);return e.KtG(b.btn_clicked("Export",{}))}),e._uU(2," Export "),e._UZ(3,"i",21),e.qZA()()}}function M(n,w){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"button",20),e.NdJ("click",function(){e.CHM(t);const b=e.oxw(2);return e.KtG(b.btn_clicked("Print all",b.data))}),e._uU(2," Print All "),e._UZ(3,"i",22),e.qZA()()}}function Z(n,w){if(1&n){const t=e.EpF();e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"p-multiSelect",11),e.NdJ("ngModelChange",function(b){e.CHM(t);const T=e.oxw();return e.KtG(T.selectedColumns=b)}),e.qZA()(),e.YNc(4,O,5,1,"div",12),e.qZA(),e.TgZ(5,"div",13),e.YNc(6,P,3,1,"div",14),e.YNc(7,C,4,0,"div",14),e.YNc(8,M,4,0,"div",14),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("options",t.cols)("ngModel",t.selectedColumns)("selectedItemsLabel",t.selectedItemsLabel),e.xp6(1),e.Q6J("ngIf",t.searchKeyword),e.xp6(2),e.Q6J("ngIf",""!=t.show_add),e.xp6(1),e.Q6J("ngIf",t.show_export),e.xp6(1),e.Q6J("ngIf",t.show_print_all)}}function h(n,w){1&n&&e._UZ(0,"th",26)}function s(n,w){if(1&n&&(e.ynx(0),e.YNc(1,h,1,0,"th",25),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.show_edit||t.show_view||t.show_history||t.show_delete||t.show_print)}}function r(n,w){if(1&n&&(e.TgZ(0,"th",27)(1,"div",28),e._uU(2),e._UZ(3,"p-sortIcon",29),e.qZA()()),2&n){const t=w.$implicit;e.s9C("pSortableColumn",t.field),e.xp6(2),e.hij(" ",t.header," "),e.xp6(1),e.s9C("field",t.field)}}function _(n,w){if(1&n&&(e.TgZ(0,"th"),e._UZ(1,"p-columnFilter",30),e.qZA()),2&n){const t=w.$implicit;e.xp6(1),e.s9C("field",t.field)}}function D(n,w){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,s,2,1,"ng-container",14),e.YNc(2,r,4,3,"th",23),e.qZA(),e.TgZ(3,"tr"),e.YNc(4,_,2,1,"th",24),e.qZA()),2&n){const t=w.$implicit,l=e.oxw();e.xp6(1),e.Q6J("ngIf",l.selectedColumns.length>0&&l.data.length>0),e.xp6(1),e.Q6J("ngForOf",t),e.xp6(2),e.Q6J("ngForOf",t)}}function S(n,w){if(1&n){const t=e.EpF();e.TgZ(0,"span")(1,"i",34),e.NdJ("click",function(b){e.CHM(t);const T=e.oxw(3),F=T.$implicit,W=T.rowIndex;return e.oxw().btn_clicked("Reorder",{value:F,ind:W,type:"up"}),e.KtG(b.stopPropagation())}),e.qZA(),e.TgZ(2,"i",35),e.NdJ("click",function(b){e.CHM(t);const T=e.oxw(3),F=T.$implicit,W=T.rowIndex;return e.oxw().btn_clicked("Reorder",{value:F,ind:W,type:"down"}),e.KtG(b.stopPropagation())}),e.qZA()()}if(2&n){const t=e.oxw(3).rowIndex,l=e.oxw();e.xp6(1),e.Akn(0==t?"pointer-events:none; opacity:0.5;":""),e.xp6(1),e.Akn(t==l.data.length-1?"pointer-events:none;opacity:0.5;":"")}}function L(n,w){if(1&n){const t=e.EpF();e.TgZ(0,"span")(1,"i",36),e.NdJ("click",function(b){e.CHM(t);const T=e.oxw(3).$implicit;return e.oxw().btn_clicked("Edit",T),e.KtG(b.stopPropagation())}),e.qZA()()}}function N(n,w){if(1&n){const t=e.EpF();e.TgZ(0,"span")(1,"i",37),e.NdJ("click",function(b){e.CHM(t);const T=e.oxw(3).$implicit;return e.oxw().btn_clicked("Delete",T),e.KtG(b.stopPropagation())}),e.qZA()()}}function R(n,w){if(1&n){const t=e.EpF();e.TgZ(0,"span")(1,"i",38),e.NdJ("click",function(b){e.CHM(t);const T=e.oxw(3).$implicit;return e.oxw().btn_clicked("View",T),e.KtG(b.stopPropagation())}),e.qZA()()}}function g(n,w){if(1&n){const t=e.EpF();e.TgZ(0,"span")(1,"i",39),e.NdJ("click",function(b){e.CHM(t);const T=e.oxw(3).$implicit;return e.oxw().btn_clicked("History",T),e.KtG(b.stopPropagation())}),e.qZA(),e._uU(2," // "),e.qZA()}}function u(n,w){if(1&n){const t=e.EpF();e.TgZ(0,"span")(1,"i",40),e.NdJ("click",function(b){e.CHM(t);const T=e.oxw(3).$implicit;return e.oxw().btn_clicked("Print",T),e.KtG(b.stopPropagation())}),e.qZA()()}}function x(n,w){if(1&n&&(e.TgZ(0,"td",33),e.YNc(1,S,3,4,"span",14),e.YNc(2,L,2,0,"span",14),e.YNc(3,N,2,0,"span",14),e.YNc(4,R,2,0,"span",14),e.YNc(5,g,3,0,"span",14),e.YNc(6,u,2,0,"span",14),e.qZA()),2&n){const t=e.oxw(2).rowIndex,l=e.oxw();e.Udp("width",10*(+l.show_edit+ +l.show_view+ +l.show_reorder+ +l.show_history+ +l.show_delete+ +l.show_print),"px"),e.Q6J("pReorderableRow",t),e.xp6(1),e.Q6J("ngIf",l.show_reorder),e.xp6(1),e.Q6J("ngIf",l.show_edit),e.xp6(1),e.Q6J("ngIf",l.show_delete),e.xp6(1),e.Q6J("ngIf",l.show_view),e.xp6(1),e.Q6J("ngIf",l.show_history),e.xp6(1),e.Q6J("ngIf",l.show_print)}}function k(n,w){if(1&n&&(e.ynx(0),e.YNc(1,x,7,9,"td",32),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.show_edit||t.show_view||t.show_history||t.show_delete||t.show_print||t.show_reorder)}}function J(n,w){if(1&n&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit,l=e.oxw().$implicit;e.xp6(2),e.hij("",l[t.field]," ")}}function G(n,w){if(1&n){const t=e.EpF();e.TgZ(0,"input",45),e.NdJ("click",function(){e.CHM(t);const b=e.oxw(2).$implicit,T=e.oxw().rowIndex,F=e.oxw();return e.KtG(F.enableCheckboxes&&F.toggleValue(T,b.field))}),e.qZA()}2&n&&e.Q6J("checked",!0)}function j(n,w){if(1&n&&(e.TgZ(0,"span",46),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit,l=e.oxw().$implicit;e.xp6(1),e.hij("",l[t.anthorData]," ")}}function K(n,w){if(1&n){const t=e.EpF();e.TgZ(0,"input",45),e.NdJ("click",function(){e.CHM(t);const b=e.oxw(2).$implicit,T=e.oxw().rowIndex,F=e.oxw();return e.KtG(F.enableCheckboxes&&F.toggleValue(T,b.field))}),e.qZA()}2&n&&e.Q6J("checked",!1)}function H(n,w){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,G,1,1,"input",43),e.YNc(2,j,2,1,"span",44),e.YNc(3,K,1,1,"input",43),e.qZA()),2&n){const t=e.oxw().$implicit,l=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",1==l[t.field]),e.xp6(1),e.Q6J("ngIf",1==l[t.field]),e.xp6(1),e.Q6J("ngIf",0==l[t.field])}}function Q(n,w){if(1&n&&(e.TgZ(0,"td"),e.YNc(1,J,3,1,"ng-container",41),e.YNc(2,H,4,3,"ng-template",null,42,e.W1O),e.qZA()),2&n){const t=w.$implicit,l=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!t.checkbox)("ngIfElse",l)}}const q=function(n){return{background:n}};function ee(n,w){if(1&n){const t=e.EpF();e.TgZ(0,"tr",31),e.NdJ("click",function(){const T=e.CHM(t).$implicit,F=e.oxw();return e.KtG(F.btn_clicked("Row",T))})("click",function(){const T=e.CHM(t).$implicit,F=e.oxw();return e.KtG(F.selected=T)}),e.YNc(1,k,2,1,"ng-container",14),e.YNc(2,Q,4,2,"td",24),e.qZA()}if(2&n){const t=w.$implicit,l=w.columns,b=e.oxw();e.Q6J("ngStyle",e.VKq(3,q,b.selected==t?"#5c525242":"")),e.xp6(1),e.Q6J("ngIf",b.selectedColumns.length>0&&b.data.length>0),e.xp6(1),e.Q6J("ngForOf",l)}}function z(n,w){if(1&n&&(e.TgZ(0,"tr")(1,"td",47)(2,"h6",48),e._uU(3),e.qZA()()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("colSpan",t.selectedColumns.length+1),e.xp6(2),e.Oqu(t.emptymessage)}}function $(n,w){if(1&n){const t=e.EpF();e.TgZ(0,"p-paginator",49),e.NdJ("onPageChange",function(b){e.CHM(t);const T=e.oxw();return e.KtG(T.btn_clicked("Paginate",b))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("rows",50)("totalRecords",t.totalRecords)("rowsPerPageOptions",t.paginatorObj.rowsPerPageOptions)("currentPageReportTemplate",t.paginatorObj.currentPageReportTemplate)("showCurrentPageReport",t.paginatorObj.showCurrentPageReport)("showFirstLastIcon",t.paginatorObj.showFirstLastIcon)}}let te=(()=>{class n{constructor(){this.id="",this.height=400,this.cols=[],this.data=[],this.selected=!1,this.loading=!1,this.paginator=!1,this.totalRecords=0,this.pageNumber=0,this.pageSize=0,this.enableCheckboxes=!1,this.searchKeyword=!0,this.show_edit=!1,this.show_view=!1,this.show_delete=!1,this.show_history=!1,this.show_print=!1,this.show_reorder=!1,this.show_export=!1,this.show_add="",this.show_print_all=!1,this.btn_click=new e.vpe,this.selectedColumns=[],this.selectedItemsLabel="\u0627\u0644\u0623\u0639\u0645\u062f\u0629 \u0627\u0644\u0645\u062e\u062a\u0627\u0631\u0629 {0}",this.search_placeholder="\u0627\u0643\u062a\u0628 \u0644\u0644\u0628\u062d\u062b",this.emptymessage="\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a",this.showSettingsColumn=0,this.paginatorObj={totalRecords:0,rowsPerPageOptions:[10,25,50,100],showFirstLastIcon:!0,showCurrentPageReport:!0,currentPageReportTemplate:"\u0639\u0631\u0636 {first} \u0625\u0644\u0649 {last} \u0645\u0646 {totalRecords} \u0635\u0641\u062d\u0629"},this.items=[{icon:"pi pi-pencil"},{icon:"pi pi-refresh"},{icon:"pi pi-trash"},{icon:"pi pi-upload",routerLink:["/fileupload"]}],this.lang=this.get_app_lang()}ngOnInit(){this.createSelectedCols(),"en"==this.lang&&(this.search_placeholder="Type to search",this.selectedItemsLabel="{0} columns selected",this.emptymessage="No Data Found",this.paginatorObj={totalRecords:0,rowsPerPageOptions:[10,25,50,100],showFirstLastIcon:!0,showCurrentPageReport:!0,currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries"})}onRowReorder(t){this.btn_clicked("Reorder",{from:t.dragIndex,to:t.dropIndex})}toggleValue(t,l){console.log("nnnnnnnnnnnnn",t),this.btn_clicked("Checkbox"),this.data[t][l]=0==this.data[t][l]?1:0}ngOnChanges(t){t.cols&&this.createSelectedCols()}createSelectedCols(){this.selectedColumns=this.cols?.filter(t=>1==t?.display)||[]}btn_clicked(t,l={}){this.btn_click.emit({type:t,value:l})}get_app_lang(){let t=localStorage.getItem("lang");return null==t&&(t=navigator.language.split("-")[0]||"ar"),t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["mts-table"]],inputs:{id:"id",height:"height",cols:"cols",data:"data",selected:"selected",loading:"loading",paginator:"paginator",totalRecords:"totalRecords",pageNumber:"pageNumber",pageSize:"pageSize",enableCheckboxes:"enableCheckboxes",searchKeyword:"searchKeyword",show_edit:"show_edit",show_view:"show_view",show_delete:"show_delete",show_history:"show_history",show_print:"show_print",show_reorder:"show_reorder",show_export:"show_export",show_add:"show_add",show_print_all:"show_print_all"},outputs:{btn_click:"btn_click"},features:[e.TTD],decls:8,vars:12,consts:[[1,"shared-table-width",2,"margin","0.4rem 0.3rem","position","relative"],["sortMode","multiple","styleClass","p-datatable-sm p-datatable-gridlines","selectionMode","single","responsiveLayout","scroll",1,"table","table-hover",3,"id","value","columns","scrollable","loading","paginator","globalFilterFields","resizableColumns","scrollHeight"],["id",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"rows","totalRecords","rowsPerPageOptions","currentPageReportTemplate","showCurrentPageReport","showFirstLastIcon","onPageChange",4,"ngIf"],[1,"header-container"],[1,"left-divs"],[1,"hader-mul-sel","left"],["optionLabel","header","appendTo","body",1,"multicol",3,"options","ngModel","selectedItemsLabel","ngModelChange"],["class","hader-search left",4,"ngIf"],[1,"right-divs"],[4,"ngIf"],[1,"hader-search","left"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text",3,"placeholder","input"],["inVal",""],[1,"btn","btn-primary",3,"click"],[1,"fa-solid","fa-file-export"],[1,"fa-solid","fa-print"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["pFrozenColumn","","rowspan","2",4,"ngIf"],["pFrozenColumn","","rowspan","2"],[3,"pSortableColumn"],[1,"p-d-flex","p-jc-between","p-ai-center"],[3,"field"],["type","text",3,"field"],[3,"ngStyle","click"],["class","td-icons","pFrozenColumn","",3,"pReorderableRow","width",4,"ngIf"],["pFrozenColumn","",1,"td-icons",3,"pReorderableRow"],[1,"fa","fa-arrow-up",3,"click"],[1,"fa","fa-arrow-down",3,"click"],[1,"fa-solid","fa-pen","yellow",3,"click"],[1,"fa-solid","fa-trash-can","danger",3,"click"],[1,"fa-solid","fa-eye","yellow",3,"click"],[1,"fa-solid","fa-clock-rotate-left","blue",3,"click"],[1,"fa-solid","fa-print","gray",3,"click"],[4,"ngIf","ngIfElse"],["checkBox",""],["type","checkbox","class","column-checkbox",3,"checked","value","click",4,"ngIf"],["style","margin: 0 10px;",4,"ngIf"],["type","checkbox",1,"column-checkbox",3,"checked","value","click"],[2,"margin","0 10px"],[3,"colSpan"],[1,"emptymessage"],[3,"rows","totalRecords","rowsPerPageOptions","currentPageReportTemplate","showCurrentPageReport","showFirstLastIcon","onPageChange"]],template:function(t,l){if(1&t&&(e.TgZ(0,"div",0)(1,"p-table",1,2),e.YNc(3,Z,9,7,"ng-template",3),e.YNc(4,D,5,3,"ng-template",4),e.YNc(5,ee,3,5,"ng-template",5),e.YNc(6,z,4,2,"ng-template",6),e.qZA(),e.YNc(7,$,1,6,"p-paginator",7),e.qZA()),2&t){const b=e.MAs(2);e.Udp("min-height",l.height,"px"),e.xp6(1),e.s9C("id",b),e.Q6J("value",l.data)("columns",l.selectedColumns)("scrollable",!0)("loading",l.loading)("paginator",!1)("globalFilterFields",l.cols)("resizableColumns",!0)("scrollHeight",l.height+"px"),e.xp6(6),e.Q6J("ngIf",l.paginator)}},dependencies:[d.sg,d.O5,d.PC,y.iA,v.jx,y.lQ,y.on,y.fz,y.qO,y.xl,E.NU,f.JJ,f.On,U.o,c.D],styles:[".header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0!important;background-color:#f8f9fa}.header-container[_ngcontent-%COMP%]   .left-divs[_ngcontent-%COMP%], .header-container[_ngcontent-%COMP%]   .right-divs[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.header-container[_ngcontent-%COMP%]   .left-divs[_ngcontent-%COMP%]{align-content:flex-start}.header-container[_ngcontent-%COMP%]   .right-divs[_ngcontent-%COMP%]{align-content:flex-end}.header-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:30px;margin-bottom:1px}  body[lang=ar] .shared-table-width .p-dropdown-label{margin:0 10px 0 -10px}  .p-speeddial-button.p-button.p-button-icon-only{width:20px!important;height:20px!important}  .p-multiselect-label-container{height:34px;margin-top:-5px}  .p-datatable .p-datatable-tbody>tr>td span{font-weight:500;font-size:13px!important}  .p-datatable.p-datatable-hoverable-rows .p-datatable-tbody>tr:not(.p-highlight):hover{cursor:pointer}  .p-column-filter-row .p-column-filter-menu-button,   .p-column-filter-row .p-column-filter-clear-button{margin-left:0!important}  .p-column-filter button:nth-child(3){display:none}  p-columnfilterformelement .p-inputtext{min-width:50px!important}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.3rem!important;padding:0 .3rem;cursor:pointer}.box[_ngcontent-%COMP%]{border:1px solid;position:relative}.article[_ngcontent-%COMP%]{display:none}.hover-tr[_ngcontent-%COMP%]{cursor:pointer}.td-icons[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:1px}.yellow[_ngcontent-%COMP%]{color:#fdc21f}.danger[_ngcontent-%COMP%]{color:#d81313}.gray[_ngcontent-%COMP%]{color:#464646}.blue[_ngcontent-%COMP%]{color:#1b31af}.rtl[_ngcontent-%COMP%]{direction:rtl}.f-right[_ngcontent-%COMP%]{text-align:right}  .p-checkbox{margin:0 .5rem!important}  .p-datatable-wrapper{border-bottom:1px solid #dcdcdc;min-height:200px}  .table,   .p-datatable-sm,   .p-datatable-wrapper{min-height:inherit!important}  body[lang=ar] .p-multiselect-filter-icon{right:calc(100% - 20px)!important;left:.5rem}  body[lang=ar] thead>tr>th>div,   body[lang=ar] .p-datatable-tbody>tr>td{text-align:right}  body[lang=ar] p-multiselect>div>p-overlay>div{min-width:180px!important;right:0!important}  body[lang=ar] .p-overlay{direction:rtl;z-index:1056!important;justify-content:start!important}  .column-checkbox{height:1rem;min-height:10px!important}"]}),n})()},986:(V,A,o)=>{o.d(A,{z:()=>c});var e=o(8645),d=o(5619),y=o(1426),v=o(3155),E=o(4946),f=o(9862),U=o(7417);let c=(()=>{class O{constructor(C,M){this.http=C,this.toast=M,this.lkp_incident_status_code=new e.x,this.lkp_incident_type_code=new e.x,this.countries=new d.X([]),this.cities=new d.X([]),this.offices=new d.X([])}getCities(C){"-1"!=C?this.getCitiesApi(C).pipe((0,y.b)(500)).subscribe(M=>{this.cities.next(M.body)},M=>{this.cities.next([])}):this.cities.next([])}get_lkp_status_code(C=5){this.http.get(v.D.apiURL+"/TGH_INCIDENT_STATUS/findAllStatusNames").subscribe(M=>{this.lkp_incident_status_code.next(M.body)},M=>{})}get_lkp_type_code(C=5){this.http.get(v.D.apiURL+"/TGH_INCIDENT_TYPE/getAllTypes").subscribe(M=>{this.lkp_incident_type_code.next(M.body)},M=>{})}getCountries(){0==this.countries.value.length&&this.getCountriesApi().subscribe(C=>{this.countries.next(C.body)})}getOffices(C){this.getOfficesApi(C).subscribe(M=>{this.offices.next(M.body)})}getOfficesApi(C){return this.http.get(v.D.apiURL+`/postOffice/city/${C}`)}getCountriesApi(){return this.http.get(v.D.apiURL+"/postOffice/getCountries")}getCitiesApi(C){let M="/postOffice/getCities";return void 0!==C&&"object"!=typeof C&&(M+=`/${C}?code=${C}`),this.http.get(v.D.apiURL+M)}}return O.\u0275fac=function(C){return new(C||O)(E.LFG(f.eN),E.LFG(U.k))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})()},1426:(V,A,o)=>{o.d(A,{b:()=>Z});var e=o(7394);class d extends e.w0{constructor(s,r){super()}schedule(s,r=0){return this}}const y={setInterval(h,s,...r){const{delegate:_}=y;return _?.setInterval?_.setInterval(h,s,...r):setInterval(h,s,...r)},clearInterval(h){const{delegate:s}=y;return(s?.clearInterval||clearInterval)(h)},delegate:void 0};var v=o(9039);const f={now:()=>(f.delegate||Date).now(),delegate:void 0};class U{constructor(s,r=U.now){this.schedulerActionCtor=s,this.now=r}schedule(s,r=0,_){return new this.schedulerActionCtor(this,s).schedule(_,r)}}U.now=f.now;const O=new class c extends U{constructor(s,r=U.now){super(s,r),this.actions=[],this._active=!1}flush(s){const{actions:r}=this;if(this._active)return void r.push(s);let _;this._active=!0;do{if(_=s.execute(s.state,s.delay))break}while(s=r.shift());if(this._active=!1,_){for(;s=r.shift();)s.unsubscribe();throw _}}}(class E extends d{constructor(s,r){super(s,r),this.scheduler=s,this.work=r,this.pending=!1}schedule(s,r=0){var _;if(this.closed)return this;this.state=s;const D=this.id,S=this.scheduler;return null!=D&&(this.id=this.recycleAsyncId(S,D,r)),this.pending=!0,this.delay=r,this.id=null!==(_=this.id)&&void 0!==_?_:this.requestAsyncId(S,this.id,r),this}requestAsyncId(s,r,_=0){return y.setInterval(s.flush.bind(s,this),_)}recycleAsyncId(s,r,_=0){if(null!=_&&this.delay===_&&!1===this.pending)return r;null!=r&&y.clearInterval(r)}execute(s,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _=this._execute(s,r);if(_)return _;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(s,r){let D,_=!1;try{this.work(s)}catch(S){_=!0,D=S||new Error("Scheduled action threw falsy error")}if(_)return this.unsubscribe(),D}unsubscribe(){if(!this.closed){const{id:s,scheduler:r}=this,{actions:_}=r;this.work=this.state=this.scheduler=null,this.pending=!1,(0,v.P)(_,this),null!=s&&(this.id=this.recycleAsyncId(r,s,null)),this.delay=null,super.unsubscribe()}}});var C=o(9360),M=o(8251);function Z(h,s=O){return(0,C.e)((r,_)=>{let D=null,S=null,L=null;const N=()=>{if(D){D.unsubscribe(),D=null;const g=S;S=null,_.next(g)}};function R(){const g=L+h,u=s.now();if(u<g)return D=this.schedule(void 0,g-u),void _.add(D);N()}r.subscribe((0,M.x)(_,g=>{S=g,L=s.now(),D||(D=s.schedule(R,h),_.add(D))},()=>{N(),_.complete()},void 0,()=>{S=D=null}))})}}}]);